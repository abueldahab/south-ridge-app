SouthRidge.Views.AlbumView=Backbone.View.extend({el:"#content",collection:null,icon:null,initialize:function(a){_.bindAll(this,"render");this.collection=a.collection;this.icon=a.icon;this.render()},render:function(){SouthRidge.Utils.ScrollTop();for(var a={albums:this.collection.models},b=0;b<this.collection.models.length;b++){var c=this.collection.models[b];void 0==c.get("name")&&c.set("name","Untitled Album");void 0==c.get("description")&&c.set("description","");c.set("icon",this.icon)}b=_.template($("#albums").html(),
a);SouthRidge.Utils.SetTopBar("Photos");forge.topbar.addButton({icon:"img/167-upload-photo@2x.png",position:"left",tint:[86,148,198,255]},function(){try{var a={width:500,height:500};SouthRidge.Utils.KindleFire()&&(a.source="gallery");forge.file.getImage(a,function(a){SouthRidge.Utils.Uploader.ImageFile(a)})}catch(b){SouthRidge.Utils.Alert("Unable to access camera or photo gallery at this time.")}});SouthRidge.Utils.DoneLoading();$(this.el).unbind().html(b).show();for(b=0;b<this.collection.models.length;b++)c=
this.collection.models[b],void 0==SouthRidge.Cache.CoverPhotos[c.get("cover_photo")]?forge.request.get("http://graph.facebook.com/"+c.get("cover_photo"),function(a){SouthRidge.Cache.CoverPhotos[a.id]=a.picture;$("#"+a.id).attr("style","background-image: url("+SouthRidge.Cache.CoverPhotos[a.id]+")")}):(a=c.get("cover_photo"),$("#"+a).attr("style","background-image: url("+SouthRidge.Cache.CoverPhotos[a]+")"))},events:{"tap div.album, div.albumTablet":"handleTap"},handleTap:function(a){a.preventDefault();
a=this.collection.where({cover_photo:$(a.target).attr("id")});1===a.length&&SouthRidge.Router.navigate("photos/"+a[0].get("id"),{trigger:!0})}});
SouthRidge.Views.PhotosView=Backbone.View.extend({el:"#content",collection:null,albumId:"",initialize:function(a){_.bindAll(this,"render");this.collection=a.collection;this.albumId=a.albumId;this.render()},render:function(){SouthRidge.Utils.ScrollTop();for(var a=SouthRidge.Cache.Albums,b="",c="",e=0;e<a.models.length;e++){var d=a.models[e];if(d.get("id")==this.albumId){b=void 0==d.get("name")?"Untitled Album":d.get("name");c=void 0==d.get("description")?"":d.get("description");break}}a={albumName:b,
albumDesc:c,photos:this.collection.models};a=_.template($("#photos").html(),a);SouthRidge.Utils.SetTopBar("");forge.topbar.addButton({text:"Back",position:"left",tint:[59,118,38,255]},function(){SouthRidge.Router.navigate("albums",{trigger:!0})});SouthRidge.Utils.DoneLoading();$(this.el).unbind().html(a).show()},events:{"tap div.photo, div.photoTablet":"handleTap"},handleTap:function(a){a.preventDefault();a=this.collection.where({id:$(a.target).attr("id")});1===a.length&&(a=a[0].get("source"),forge.tabs.openWithOptions({url:a,
tint:[59,118,38,255]},function(a){SouthRidge.Utils.Log(a.url)}))}});
